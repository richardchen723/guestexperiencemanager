{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="profile-page">
    <div class="profile-header">
        <h1>My Profile</h1>
    </div>
    
    <div class="profile-content">
        <div class="profile-section">
            <h2>Account Information</h2>
            <div class="profile-info">
                <div class="info-item">
                    <label>Name:</label>
                    <span id="profile-name">{{ current_user.name or current_user.email }}</span>
                </div>
                <div class="info-item">
                    <label>Email:</label>
                    <span id="profile-email">{{ current_user.email }}</span>
                </div>
                <div class="info-item">
                    <label>Role:</label>
                    <span id="profile-role">{{ current_user.role }}</span>
                </div>
            </div>
        </div>
        
        <div class="profile-section">
            <h2>WhatsApp Notifications</h2>
            <form id="profile-form">
                <div class="form-group">
                    <label for="whatsapp-number">WhatsApp Number</label>
                    <input 
                        type="text" 
                        id="whatsapp-number" 
                        name="whatsapp_number" 
                        placeholder="+14155552671"
                        pattern="^\+[1-9]\d{1,14}$"
                    >
                    <small class="form-hint">Enter your phone number in E.164 format (e.g., +14155552671)</small>
                    <div class="error-message" id="whatsapp-number-error"></div>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input 
                            type="checkbox" 
                            id="whatsapp-notifications-enabled" 
                            name="whatsapp_notifications_enabled"
                        >
                        <span>Enable WhatsApp notifications</span>
                    </label>
                    <small class="form-hint">Receive WhatsApp messages for ticket mentions, assignments, and status changes</small>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" id="save-button">Save Changes</button>
                    <div class="success-message" id="success-message" style="display: none;"></div>
                    <div class="error-message" id="error-message" style="display: none;"></div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/profile-page.js') }}"></script>
{% endblock %}




